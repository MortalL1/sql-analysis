# Web界面使用指南

## 简介

`sql-query-ui.html` 是一个美观、易用的Web界面，用于执行多数据源SQL查询。

## 功能特性

### 🎯 核心功能

1. **多数据源支持**
   - MySQL 关系型数据库
   - MongoDB 文档数据库
   - Redis 缓存数据库

2. **智能查询**
   - 语法高亮输入框
   - 示例查询快速填充
   - 超时时间自定义
   - 快捷键支持（Ctrl + Enter执行）

3. **结果展示**
   - 表格形式展示数据
   - 自动分页（每页100条）
   - 执行统计信息
   - 错误信息提示

4. **美观界面**
   - 现代化设计
   - 响应式布局
   - 渐变配色
   - 流畅动画

## 使用步骤

### 1. 启动后端服务

```bash
cd /Users/lwj/work/sql-analysis
mvn spring-boot:run
```

确保服务在 `http://127.0.0.1:8080` 运行。

### 2. 打开Web界面

**方法一：直接打开**
```bash
open sql-query-ui.html  # macOS
start sql-query-ui.html # Windows
```

**方法二：浏览器打开**
- 找到项目根目录的 `sql-query-ui.html` 文件
- 双击打开
- 或拖拽到浏览器窗口

### 3. 执行查询

#### MySQL查询示例

1. 选择数据源：`MySQL`
2. 输入SQL：
   ```sql
   SELECT * FROM user WHERE age > 25
   ```
3. 点击"执行查询"
4. 查看表格结果

#### MongoDB查询示例

1. 选择数据源：`MongoDB`
2. 输入查询命令：
   ```json
   {"collection": "users", "operation": "find", "limit": 10}
   ```
3. 点击"执行查询"
4. 查看表格结果

#### Redis查询示例

1. 选择数据源：`Redis`
2. 输入命令：
   ```json
   {"command": "GET", "key": "user:1"}
   ```
3. 点击"执行查询"
4. 查看结果

### 4. 使用示例快速填充

每个数据源都提供了常用查询示例：

- 点击示例代码即可自动填充到输入框
- 根据需要修改参数
- 快速执行查询

## 界面说明

### 顶部区域
- **标题栏**：显示系统名称和支持的数据源

### 查询区域
- **数据源类型**：下拉选择 MySQL/MongoDB/Redis
- **超时时间**：设置查询超时时间（10/30/60/120秒）
- **查询语句**：输入SQL或查询命令的文本框
- **执行查询**：发送请求执行查询
- **清空**：清空输入框和结果
- **示例查询**：根据选择的数据源显示不同示例

### 结果区域

#### 成功执行
显示4个统计卡片：
1. **数据源**：执行查询的数据源类型
2. **操作类型**：SQL操作类型（SELECT/INSERT/UPDATE等）
3. **影响行数**：查询返回或影响的行数
4. **执行时间**：查询耗时（毫秒）

#### 数据表格
- 表头显示字段名
- 表体显示数据
- 悬停高亮行
- NULL值特殊标记

#### 分页器
- 仅当数据超过100条时显示
- 显示当前页/总页数
- 上一页/下一页按钮
- 页码快速跳转
- 显示总数据量

#### 错误提示
- **绿色提示**：操作成功
- **红色提示**：执行错误
- **蓝色提示**：信息提示

## 快捷键

- `Ctrl + Enter`：执行查询

## 常见问题

### 1. 无法连接到后端

**现象**：点击"执行查询"后提示"网络错误"

**解决方案**：
- 确认后端服务已启动
- 检查端口是否为 8080
- 查看浏览器控制台错误信息

### 2. 跨域错误

**现象**：提示 CORS 错误

**解决方案**：
- 已在后端添加 `CorsConfig.java` 配置
- 重启后端服务

### 3. 查询超时

**现象**：提示查询超时

**解决方案**：
- 增加超时时间设置
- 优化查询语句
- 检查数据库性能

### 4. 中文乱码

**现象**：查询结果中文显示乱码

**解决方案**：
- 检查MySQL字符集是否为 utf8mb4
- 参考主文档中的字符集配置

## 浏览器兼容性

推荐使用以下浏览器：
- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+

## 安全提示

⚠️ **重要提醒**：

1. 本界面为开发/测试工具
2. 不要在生产环境直接暴露
3. 建议添加身份认证
4. 注意SQL注入风险
5. 限制可执行的操作类型

## 自定义

### 修改样式

编辑 `sql-query-ui.html` 中的 `<style>` 部分：

```css
/* 修改主题色 */
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

/* 修改分页大小 */
const pageSize = 100;  // 改为你想要的数量
```

### 添加新示例

在 `examples` 对象中添加：

```javascript
const examples = {
    mysql: [
        { label: '新示例', value: 'SELECT * FROM table' },
        // 添加更多...
    ]
};
```

## 截图示例

### 查询界面
- 清晰的输入区域
- 数据源类型选择
- 示例查询列表

### 结果展示
- 统计信息卡片
- 表格数据展示
- 分页导航

### 错误提示
- 友好的错误信息
- 网络异常提示

## 技术栈

- HTML5
- CSS3（渐变、动画、Flexbox）
- 原生JavaScript（Fetch API、ES6+）
- 无需任何框架或库
- 纯前端实现

## 更新日志

### v1.0.0 (2025-12-16)
- ✅ 初始版本发布
- ✅ 支持MySQL/MongoDB/Redis
- ✅ 表格展示和分页
- ✅ 错误处理
- ✅ 示例查询
- ✅ 响应式设计

## 反馈与建议

如有问题或建议，请通过以下方式反馈：
- 查看项目主文档 `README.md`
- 查看多数据源指南 `MULTI-DATASOURCE-GUIDE.md`
- 查看测试示例 `test-examples.md`

---

享受使用 SQL多数据源查询系统！🚀



